# `DLL_PROCESS_DETACH`

Библиотека [[DLL]] выгружается из виртуального адресного пространства вызывающего процесса, так как она была загружена безуспешно или количество ссылок достигло нуля (процессы либо завершаются, либо называются [[FreeLibrary]] один раз при каждом вызове [[LoadLibrary]]). Параметр [[lpReserved]] указывает, выгружается ли библиотека DLL в результате вызова [[FreeLibrary]] , сбоя загрузки или завершения процесса. Библиотека DLL может использовать эту возможность для вызова функции [[TlsFree]] , чтобы освободить все индексы [[TLS]], выделенные с помощью [[TlsAlloc]] , и освободить локальные данные потока. Обратите внимание, что поток, получающий уведомление [[DLL_PROCESS_DETACH]] , не обязательно является тем же потоком, который получил уведомление [[DLL_PROCESS_ATTACH]] .
